-- ======================================================================================
-- File         : oo_test.lua
-- Author       : Wu Jie 
-- Last Change  : 11/23/2010 | 11:04:46 AM | Tuesday,November
-- Description  : 
-- ======================================================================================

--/////////////////////////////////////////////////////////////////////////////
-- requires
--/////////////////////////////////////////////////////////////////////////////

oo = require("loop.base")

--/////////////////////////////////////////////////////////////////////////////
--
--/////////////////////////////////////////////////////////////////////////////

local vec3_t = nil
local v1 = nil

-- ------------------------------------------------------------------ 
-- Desc: loop method 
-- ------------------------------------------------------------------ 

vec3_t = oo.class({
    x = 1, 
    y = 2, 
    z = 3, 
    __tostring = function(self)
        return self.x .. "," .. self.y .. "," .. self.z
    end
})

-- NOTE: also valid in this way: { 
-- function vec3_t:__tostring()
--     return self.x .. "," .. self.y .. "," .. self.z
-- end
-- } NOTE end 

v1 = vec3_t{ x = 10 }
print("oo method v1 = " .. tostring(v1)) 

-- ------------------------------------------------------------------ 
-- Desc: my method 
-- ------------------------------------------------------------------ 

vec3_t = { 
    x = 1, 
    y = 2, 
    z = 3, 
    __tostring = function(self) 
        return self.x .. "," .. self.y .. "," .. self.z
    end
}
vec3_t.__index = vec3_t -- important!!!

v1 = { x = 10 }
v1 = setmetatable ( v1, vec3_t )
print("my method v1 = " .. tostring(v1)) 

